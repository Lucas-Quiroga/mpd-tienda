import{j as e}from"./utils.CV4bOxs7.js";import{R as u}from"./index.DgOxCJIz.js";import{B as j}from"./button.DHZLWCb5.js";import{u as f,t as g,L as t,I as i}from"./zod.D9YB93N9.js";import{C as w,a as y,b as N,c as b,d as S,e as C}from"./card.COqkzu4g.js";import{a as v}from"./adminSchema.CtEbUD2Y.js";import{u as F,S as R}from"./spinner.D9hkknOv.js";import"./index.DOI0olcG.js";import"./index.C3AoWCtw.js";import"./index.DUh_eYIC.js";import"./createLucideIcon.ZND8IBUW.js";const H=()=>{const{register:r,formState:{errors:s},formState:n,handleSubmit:o,reset:l}=f({resolver:g(v)}),{execute:p,isLoading:d,isSuccess:m,data:x}=F(),h=async c=>{try{const a=await p("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({name:c.name,email:c.email,password:c.password}).toString()});m&&l(),a&&a.data&&a.data.url&&window.location.assign(a.data.url)}catch(a){console.error("Error registering admin:",a)}};return u.useEffect(()=>{n.isSubmitSuccessful&&l()},[n.isSubmitSuccessful,l]),e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:o(h),className:"flex flex-col md:flex-row justify-center items-center gap-8 p-8 h-[100vh]",children:e.jsxs(w,{className:"w-full md:w-[400px]",children:[m&&x&&e.jsx("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4",role:"alert",children:e.jsx("p",{children:"Registrado correctamente "})}),e.jsxs(y,{children:[e.jsx(N,{children:"Registro"}),e.jsx(b,{children:"Crear una nueva cuenta de administrador"})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"name",children:"Nombre"}),e.jsx(i,{id:"name",type:"text",placeholder:"Admin",...r("name")}),s.name&&e.jsx("span",{className:"text-red-500",children:s?.name.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"email",children:"Email"}),e.jsx(i,{id:"email",type:"email",placeholder:"admin@example.com",...r("email")}),s.email&&e.jsx("span",{className:"text-red-500",children:s?.email.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"password",children:"Contraseña"}),e.jsx(i,{id:"password",type:"password",...r("password"),placeholder:"********"}),s.password&&e.jsx("span",{className:"text-red-500",children:s.password.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"confirm-password",children:"Confirmar contraseña"}),e.jsx(i,{id:"repeatPassword",type:"password",...r("repeatPassword"),placeholder:"********"}),s.repeatPassword&&e.jsx("span",{className:"text-red-500",children:s.repeatPassword.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{htmlFor:"secretKey",children:"Clave secreta"}),e.jsx(i,{id:"secret-key",type:"password",...r("secretKey"),placeholder:"********"}),s.secretKey&&e.jsx("span",{className:"text-red-500",children:s.secretKey.message})]})]}),e.jsxs(C,{style:{display:"flex",flexDirection:"column",gap:"1rem",alignItems:"center"},children:[e.jsx(j,{type:"submit",disabled:d,className:"w-full",children:d?e.jsx(R,{size:"medium"}):"Registrar"}),e.jsxs("p",{children:["¿Ya tienes una cuenta?"," ",e.jsx("a",{href:"/admin/signin",className:"text-blue-600",children:"Iniciar sesión"})]})]})]})})})};export{H as default};
