import{j as e}from"./utils.CV4bOxs7.js";import{R as g}from"./index.DgOxCJIz.js";import{C as b,a as N,b as v,c as y,d as C,e as S}from"./card.COqkzu4g.js";import{B as o}from"./button.DHZLWCb5.js";import{u as F,t as A,L as s,I as t}from"./zod.D9YB93N9.js";import{M as P}from"./index.CPpKmwX6.js";import{u as I}from"./adminSchema.CtEbUD2Y.js";import{u as T,S as k}from"./spinner.D9hkknOv.js";import{g as z}from"./index-454a0f5f.C86mfHgW.js";import{a as R}from"./client.DzQM3-ZA.js";import"./index.DOI0olcG.js";import"./index.C3AoWCtw.js";import"./index.DUh_eYIC.js";import"./iconBase.CZa0hx8C.js";import"./createLucideIcon.ZND8IBUW.js";import"./tslib.es6.CDuPK5Eb.js";const Z=()=>{const{execute:l,isLoading:n}=T(),[m,i]=g.useState(null),u=z(R),{register:r,handleSubmit:p,formState:{errors:L},reset:h}=F({resolver:A(I),shouldUseNativeValidation:!1,defaultValues:{currentPassword:"",newPassword:"",repeatNewPassword:"",name:""}}),x=async j=>{try{const a=u.currentUser;if(!a){console.error("No user logged in");return}const f=await a.getIdToken(!0),c=await l("/api/admin/updateAccount",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j),token:f});if(c){const{data:d,response:w}=c;w.ok?(console.log("Account updated successfully:",d),i("Cambios actualizados correctamente"),setTimeout(()=>{i(null)},2e3),h()):console.error("Failed to update account:",d)}else console.log("Request was aborted or failed")}catch(a){console.error("Error updating account:",a)}};return e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-muted",children:e.jsxs("form",{onSubmit:p(x),children:[m&&e.jsx("div",{className:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4",role:"alert",children:e.jsx("p",{children:"Cambios actualizados correctamente"})}),e.jsxs(b,{className:"w-full max-w-md p-6 sm:p-8",children:[e.jsxs(N,{children:[e.jsx(v,{children:"Ajustes de cuenta"}),e.jsx(y,{children:"Gestione los datos de su cuenta"})]}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(s,{htmlFor:"current-password",children:"Contraseña actual"}),e.jsx(t,{id:"current-password",type:"password",placeholder:"Ingresa tu contraseña actual",...r("currentPassword")})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"new-password",children:"Nueva contraseña"}),e.jsx(t,{id:"new-password",type:"password",placeholder:"Ingresa tu nueva contraseña",...r("newPassword")})]}),e.jsxs("div",{children:[e.jsx(s,{htmlFor:"confirm-password",children:"Confirmar contraseña"}),e.jsx(t,{id:"confirm-password",type:"password",placeholder:"Confirma tu nueva contraseña",...r("repeatNewPassword")})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(s,{htmlFor:"name",children:"Nombre"}),e.jsx(t,{id:"name",type:"text",placeholder:"Ingresar nombre",...r("name")})]}),e.jsxs("div",{className:"hidden",children:[e.jsx(s,{htmlFor:"profile-image",children:"Agregar imagen"}),e.jsxs(o,{variant:"outline",size:"icon",className:"h-10 w-10",children:[e.jsx(P,{className:"h-5 w-5"}),e.jsx("input",{id:"profile-image",type:"file",className:"hidden"})]})]})]})]}),e.jsxs(S,{className:"flex justify-end gap-2",children:[e.jsx(o,{variant:"outline",children:"Cancelar"}),e.jsx(o,{type:"submit",disabled:n,children:n?e.jsx(k,{size:"medium"}):"Guardar cambios"})]})]})]})})};export{Z as default};
