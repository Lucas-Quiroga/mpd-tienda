import{c as g}from"./createLucideIcon.hjzkcH4V.js";import{r as d}from"./index.DWKhlr8t.js";import{L as y}from"./const.D9r1vPbu.js";/**
 * @license lucide-react v0.394.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=g("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);let l=[],m=(t,e)=>{let n=[],i={get(){return i.lc||i.listen(()=>{})(),i.value},l:e||0,lc:0,listen(r,u){return i.lc=n.push(r,u||i.l)/2,()=>{let s=n.indexOf(r);~s&&(n.splice(s,2),--i.lc||i.off())}},notify(r,u){let s=!l.length;for(let a=0;a<n.length;a+=2)l.push(n[a],n[a+1],i.value,r,u);if(s){for(let a=0;a<l.length;a+=5){let c;for(let f=a+1;!c&&(f+=5)<l.length;)l[f]<l[a+1]&&(c=l.push(l[a],l[a+1],l[a+2],l[a+3],l[a+4]));c||l[a](l[a+2],l[a+3],l[a+4])}l.length=0}},off(){},set(r){let u=i.value;u!==r&&(i.value=r,i.notify(u))},subscribe(r,u){let s=i.listen(r,u);return r(i.value),s},value:t};return i};function p(t,e,n){let i=new Set([...e,void 0]);return t.listen((r,u,s)=>{i.has(s)&&n(r,u,s)})}let v=(t={})=>{let e=m(t);return e.setKey=function(n,i){let r=e.value;typeof i>"u"&&n in e.value?(e.value={...e.value},delete e.value[n],e.notify(r,n)):e.value[n]!==i&&(e.value={...e.value,[n]:i},e.notify(r,n))},e};function O(t,e={}){let n=d.useCallback(r=>e.keys?p(t,e.keys,r):t.listen(r),[e.keys,t]),i=t.get.bind(t);return d.useSyncExternalStore(n,i,i)}const b=t=>{typeof window<"u"&&localStorage.setItem(y,JSON.stringify(t))},S=()=>{if(typeof window<"u"){const t=localStorage.getItem(y);return t?JSON.parse(t):{}}return{}},o=v(S());o.subscribe(t=>b(t));function x(t){if(t.id===void 0){console.error("Intento de añadir un producto sin ID al carrito");return}const{id:e,name:n,image:i,price:r}=t,u=i??"",s=typeof r=="string"?parseFloat(r):r;if(isNaN(s)){console.error(`Precio inválido para el producto ${e}: ${r}`);return}const a=o.get()[e];a?o.setKey(e,{...a,quantity:a.quantity+1}):o.setKey(e,{id:e,name:n,image:u,price:s,quantity:1})}function E(t){const e=o.get()[t];if(e)if(e.quantity>1)I(t,e.quantity-1);else{const n={...o.get()};delete n[t],o.set(n)}}function I(t,e){const n={...o.get()};n[t].quantity=e,o.set(n)}function K(t){const e=o.get()[t];return e?e.quantity:0}function Q(){return Object.values(o.get()).reduce((t,e)=>t+e.quantity,0)}function k(){return Object.values(o.get()).reduce((t,e)=>t+e.quantity*e.price,0)}function w(){o.set({})}export{L as X,x as a,I as b,o as c,Q as d,k as e,w as f,K as g,E as r,O as u};
